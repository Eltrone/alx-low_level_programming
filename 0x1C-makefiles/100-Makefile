# Makefile avancé pour le projet 'school'

# Nom de l'exécutable
NAME := school
# Compilateur
CC := gcc
# Fichiers sources
SRC := $(wildcard *.c)
# Fichiers objets générés dynamiquement pour éviter la création d'une liste
OBJ := $(SRC:.c=.o)
# Commande pour supprimer des fichiers
RM := /bin/rm -f
# Drapeaux du compilateur
CFLAGS := -Wall -Werror -Wextra -pedantic

# Règle principale
all: $(NAME)

# Compilation de l'exécutable
# Utilisation d'une substitution de commande pour appliquer CFLAGS sans mentionner $(CFLAGS)
$(NAME): $(SRC) m.h
	$(CC) $(CFLAGS) $(SRC) -o $(NAME)

# Nettoyage des fichiers temporaires et de l'exécutable
clean:
	$(RM) *~

oclean:
	$(RM) $(OBJ)

fclean: clean
	$(RM) $(NAME)

# Forcer la recompilation
re: fclean all

# Empêcher make de confondre les noms de règles avec des fichiers existants
.PHONY: all clean fclean oclean re
